# 实现内网穿透端口转发功能

## 功能需求
- 公网服务器运行服务端，监听指定端口
- 内网服务器运行客户端，连接公网服务端
- 将内网服务器的本地8080端口转发到公网服务器，通过公网端口暴露

## 实现步骤

### 1. 完善 main.go 文件
- 导入 commands 包
- 调用 Execute() 函数启动命令行工具

### 2. 实现 service 命令（公网服务端）
- 在 service.go 中定义 service 命令
- 实现服务端逻辑：
  - 监听指定端口
  - 接受客户端连接
  - 建立TCP隧道
  - 转发流量

### 3. 实现 client 命令（内网客户端）
- 在 client.go 中定义 client 命令
- 实现客户端逻辑：
  - 连接公网服务端
  - 监听本地端口转发请求
  - 建立TCP隧道
  - 转发流量

### 4. 实现TCP流量转发核心逻辑
- 实现双向TCP连接转发功能
- 处理连接的建立和关闭
- 处理流量的读写

### 5. 测试功能
- 编译项目
- 在公网服务器运行服务端
- 在内网服务器运行客户端
- 测试端口转发功能

## 技术细节
- 使用TCP协议进行通信
- 使用goroutine处理并发连接
- 使用io.Copy进行流量转发
- 命令行参数支持配置监听端口、目标地址等

## 文件结构
```
netproxy/
├── main.go              # 主入口文件
├── commands/
│   ├── root.go          # 根命令定义
│   ├── service.go       # 服务端命令实现
│   └── client.go        # 客户端命令实现
├── go.mod               # 依赖管理
└── go.sum               # 依赖校验
```